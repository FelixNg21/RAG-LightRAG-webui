{% extends 'base.html' %}

{% block head %}
<link rel="stylesheet" href="{{url_for('static', filename='css/main.css') }}">
{% endblock %}

{% block body %}
<div id="chat-log"></div>
<!--<form id="query-form" hx-post="/query" method="post" hx-target="#chat-log" hx-swap="beforeend"-->
<!--      hx-on::after-request="if(event.detail.successful) this.reset()"-->
<!--      hx-trigger="submit, keydown[keyCode===13&&!event.shiftKey]"-->
<!--      hx-on:htmx:validation:validate="event.preventDefault(); alert('Please enter a query')"-->
<!--      >-->
<!--    <textarea id="query-text" name="query" rows="1" placeholder="Enter your query here..." hx-validate="true"></textarea>-->
<!--    <input type="submit" value="Submit"  />-->
<!--</form>-->

<form hx-on::after-request="if(event.detail.successful) this.reset()"
      hx-post="/query"
      hx-target="#chat-log"
      hx-swap="beforeend"
      hx-validate="true"
      id="query-form">
    <textarea id="query-text" name="query" placeholder="Enter your query here..."
              onkeyup="this.setCustomValidity('')"
              hx-on:htmx:validation:validate="if(this.value==''){
                this.setCustomValidity('Please enter a query');
                htmx.find('#query-form').reportValidity()
              }"></textarea>
    <input type="submit" value="Submit"/>


</form>

{% endblock %}

{% block scripts %}
{% endblock %}